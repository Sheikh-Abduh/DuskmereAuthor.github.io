<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duskmere Polls - The Faction’s Fate</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>The Faction’s Fate</h1>
        <p>Cast your vote. Decide their destiny.</p>
    </header>
    
    <section id="poll-container">
        <div class="poll-box">
            <h2 id="poll-question">Which faction should wage war next?</h2>
            <form id="poll-form">
                <label class="poll-option">
                    <input type="radio" name="vote" value="House D’Noirville"> House D’Noirville
                </label>
                <label class="poll-option">
                    <input type="radio" name="vote" value="The Crimson Vow"> The Crimson Vow
                </label>
                <label class="poll-option">
                    <input type="radio" name="vote" value="The Argent Dawn"> The Argent Dawn
                </label>
                <label class="poll-option">
                    <input type="radio" name="vote" value="The Bloodmarked"> The Bloodmarked
                </label>
                <button type="submit" class="vote-button">Vote</button>
            </form>
            <p id="vote-confirmation" class="hidden">Thank you for voting. Your choice has been recorded.</p>
        </div>
    </section>
    
    <!-- Admin Panel (Only visible to the owner) -->
    <section id="admin-panel" class="hidden">
        <h2>Poll Management</h2>
        <label for="new-question">New Poll Question:</label>
        <input type="text" id="new-question" placeholder="Enter poll question...">
        
        <div id="options-container">
            <label>Poll Options:</label>
            <div class="option-group">
                <input type="text" class="poll-option-input" placeholder="Enter option...">
                <button class="remove-option">✖</button>
            </div>
        </div>
        <button id="add-option">+ Add Option</button>
        <button id="save-poll">Save Poll</button>
        <button id="close-poll" class="danger">Close Poll</button>
    </section>

    <footer>
        <p>Duskmere Chronicles &copy; 2025 | Blood, Betrayal, and Consequence</p>
    </footer>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const pollForm = document.getElementById("poll-form");
            const voteConfirmation = document.getElementById("vote-confirmation");
            const adminPanel = document.getElementById("admin-panel");
            
            // Simulating owner authentication (Replace with actual authentication logic)
            const isOwner = true; // Set to false for regular users
            if (isOwner) {
                adminPanel.classList.remove("hidden");
            }
            
            // Handling voting process
            pollForm.addEventListener("submit", function(event) {
                event.preventDefault();
                voteConfirmation.classList.remove("hidden");
                pollForm.style.display = "none";
            });
            
            // Poll Management (Only Owner)
            if (isOwner) {
                document.getElementById("add-option").addEventListener("click", function() {
                    const optionContainer = document.getElementById("options-container");
                    const newOption = document.createElement("div");
                    newOption.classList.add("option-group");
                    newOption.innerHTML = '<input type="text" class="poll-option-input" placeholder="Enter option..."> <button class="remove-option">✖</button>';
                    optionContainer.appendChild(newOption);
                });
                
                document.getElementById("close-poll").addEventListener("click", function() {
                    alert("Poll closed. No further votes can be submitted.");
                    document.getElementById("poll-container").innerHTML = "<h2>Poll Closed</h2><p>Results will be published soon.</p>";
                });
            }
        });
    </script>
</body>
</html>
